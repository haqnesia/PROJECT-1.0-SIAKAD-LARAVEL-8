
# STEP 1

    <button class="btn btn-success btn-sm" data-act="item_aktif" data-kode="{{ $row->fak_kode }}"> <i class="fas fa-check"></i></button>
    <button class="btn btn-danger btn-sm" data-act="item_nonaktif" data-kode="{{ $row->fak_kode }}"> <i class="fas fa-times"></i></button>

# STEP 1

    // AJAX AKTIF

    $(document).on('click', '[data-act=item_aktif]', function (e) {
        e.preventDefault();

        if (!confirm('Yakin ingin mengaktifkan data ini?')) return;

        var kode = $(this).data('kode');

        $.post("{{ route('fakultas.aktif') }}", {
            _token: "{{ csrf_token() }}",
            kode: kode
        })
        .done(function (r) {
            if (r.success) {
                alert('Data berhasil diaktifkan');
                view_data();
            } else {
                alert(r.message);
            }
        })
        .fail(function (x) {
            alert(x.status + ' - ' + x.statusText);
        });
    });

    // AJAX NON AKTIF

    $(document).on('click', '[data-act=item_nonaktif]', function (e) {
        e.preventDefault();

        if (!confirm('Yakin ingin menonaktifkan data ini?')) return;

        var kode = $(this).data('kode');

        $.post("{{ route('fakultas.nonaktif') }}", {
            _token: "{{ csrf_token() }}",
            kode: kode
        })
        .done(function (r) {
            if (r.success) {
                alert('Data berhasil dinonaktifkan');
                view_data();
            } else {
                alert(r.message);
            }
        })
        .fail(function (x) {
            alert(x.status + ' - ' + x.statusText);
        });
    });


# STEP 1

    Route::post('/aktif', [MasterFakultasController::class, 'aktif'])->name('aktif');
    Route::post('/nonaktif', [MasterFakultasController::class, 'nonaktif'])->name('nonaktif');
    
# STEP 1

    # FUNGSI AKTIF

    public function aktif(Request $r){

        $result = array('success'=>false);

        try {
  
            $r->validate([
                'kode' => 'required|exists:master_ta_fakultas,fak_kode'
            ]);
    
            $kode       = $r->get('kode');
            $data       = MasterFakultas::findOrFail($kode);
    
            # PROSES

            $data->fak_aktif         = 'Y';

            $data->updated_kode     = $this->UsersID;
            $data->updated_nama     = $this->UsersName;
            $data->updated_ip       = $r->ip();

            $data->save();

        } catch (\Exception $e) {
            $result['message'] = $e->getMessage();	
            return response()->json($result);
        }

        $result['success']  = true;

        return response()->json($result);

    }

    # FUNGSI NON AKTIF

    public function nonaktif(Request $r){

        $result = array('success'=>false);

        try {
  
            $r->validate([
                'kode' => 'required|exists:master_ta_fakultas,fak_kode'
            ]);
    
            $kode       = $r->get('kode');
            $data       = MasterFakultas::findOrFail($kode);
    
            # PROSES

            $data->fak_aktif         = 'T';

            $data->updated_kode     = $this->UsersID;
            $data->updated_nama     = $this->UsersName;
            $data->updated_ip       = $r->ip();

            $data->save();

        } catch (\Exception $e) {
            $result['message'] = $e->getMessage();	
            return response()->json($result);
        }

        $result['success']  = true;

        return response()->json($result);

    }

# STEP 1
# STEP 1





